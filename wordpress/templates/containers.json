[
  {
    "essential": false,
    "mountPoints": [
      {
        "containerPath": "/var/www/html",
        "sourceVolume": "wp_data"
      }
    ],
    "links": [
      "mysql"
    ],
    "environment": [
      {
        "name": "WORDPRESS_DB_PASSWORD",
        "value": "${db_pw}"
      }
    ],
    "name": "wordpress",
    "image": "library/wordpress:4.9.4",
    "logConfiguration": {
      "logDriver": "awslogs",
      "options": {
        "awslogs-group": "${wordpress_log_group_name}",
        "awslogs-region": "us-east-1",
        "awslogs-stream-prefix": "wordpress"
      }
    },
    "memoryReservation": 200
  },
  {
    "name": "mysql",
    "image": "library/mysql:5.7",
    "essential": true,
    "environment": [
      {
        "name": "MYSQL_ROOT_PASSWORD",
        "value": "${db_pw}"
      }
    ],
    "entrypoint": [
      "/bin/sh"
    ],
    "command": [
      "-c",
      "echo \"grant all on *.* to 'root'@'172.17.0.0/255.255.0.0' identified by '${db_pw}';\" > /etc/mysql/conf.d/init.sql && docker-entrypoint.sh mysqld --bind-address=0.0.0.0 --init-file=/etc/mysql/conf.d/init.sql"
    ],
    "mountPoints": [
      {
        "containerPath": "/var/lib/mysql",
        "sourceVolume": "mysql_data"
      }
    ],
    "logConfiguration": {
      "logDriver": "awslogs",
      "options": {
        "awslogs-group": "${mysql_log_group_name}",
        "awslogs-region": "us-east-1",
        "awslogs-stream-prefix": "mysql"
      }
    },
    "memoryReservation": 100
  }
]
